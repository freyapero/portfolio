
# HTTP

**HTTP** (_HyperText Transfer Protocol_) — гипертекстовый [протокол](https://ru.wikipedia.org/wiki/%D0%A1%D0%B5%D1%82%D0%B5%D0%B2%D0%BE%D0%B9_%D0%BF%D1%80%D0%BE%D1%82%D0%BE%D0%BA%D0%BE%D0%BB) прикладного уровня для передачи данных по технологии «клиент-сервер», который работает поверх TCP/TLS. В отличие от других протоколов, HTTP не поддерживает состояние stateless, то есть сервер не может хранить в себе постоянную информацию об одном клиенте. Однако в современных версиях HTTP есть возможность закешировать популярные страницы и отправлять нескольких запросов и ответов за одно TCP-соединение.


## История версий HTTP

**HTTP/0.9** — 1991 год. Протокол предложен [Тимом Бернерсом-Ли](https://ru.wikipedia.org/wiki/%D0%91%D0%B5%D1%80%D0%BD%D0%B5%D1%80%D1%81-%D0%9B%D0%B8,_%D0%A2%D0%B8%D0%BC). Задокументированы основные [синтаксические](https://ru.wikipedia.org/wiki/%D0%A1%D0%B8%D0%BD%D1%82%D0%B0%D0%BA%D1%81%D0%B8%D1%81) и [семантические](https://ru.wikipedia.org/wiki/%D0%A1%D0%B5%D0%BC%D0%B0%D0%BD%D1%82%D0%B8%D0%BA%D0%B0) положения.

**HTTP/1.0** —  1996 год. Выпущен информационный документ [RFC 1945](https://tools.ietf.org/html/rfc1945).

**HTTP/1.1** — 1999 год. Появился режим «постоянного соединения.

**HTTP/2** — 2015 год.  Протокол становится бинарным.

**HTTP/3** — уже используется вместо [TCP](https://ru.wikipedia.org/wiki/Transmission_Control_Protocol) в качестве транспортного протокола.


## Основные задачи HTTP



* Получение и передача документов;
* Передача мета-информации (например, о MIME-типе и размере документа);
* Согласование содержимого (в каком виде передавать документ);
* Авторизация на сервере;
* Управление сессией и соединением;
* Кеширование документов (например, css-стилей).


## Клиент в HTTP

Клиент посылает запрос и инициирует соединение. Часто клиентом выступает веб-браузер, который отправляет на сервер запрос на получения информации с[ веб-сайтов](https://ru.wikipedia.org/wiki/%D0%92%D0%B5%D0%B1-%D1%81%D0%B0%D0%B9%D1%82). Клиенты — это конечные потребители услуг сервера (отправка запроса).


### HTTP-запрос

Начинается со стартовой строки запроса с методом, URL документа и версией HTTP — определяет тип сообщения. Затем идут заголовки, которые характеризуют тело сообщения, параметры передачи и прочие сведения. После этого следует тело запроса: данные сообщения, которые отделяются от заголовков пустой строкой.

Стартовая строка и заголовок являются обязательными элементами.  Для версии протокола 1.1 сообщение запроса обязательно должно содержать заголовок _Host_.

**Пример стартовой сроки и заголовка**

`GET /wiki/HTTP HTTP/1.0`

`Host: ru.wikipedia.org`


#### Методы

Метод в HTTP указывает на основную операцию над ресурсом. Кроме методов GET и HEAD, часто применяется метод POST.

**GET** используется для запроса содержимого указанного ресурса.

**HEAD** используется для извлечения [метаданных](https://ru.wikipedia.org/wiki/%D0%9C%D0%B5%D1%82%D0%B0%D0%B4%D0%B0%D0%BD%D0%BD%D1%8B%D0%B5).

**POST** используется для передачи пользовательских данных заданному серверу.

**PUT** и **PATCH** используется для загрузки содержимого.

**DELETE** используется для того, чтобы удалить указанный ресурс.

**CONNECT, TRACE, OPTIONS** — используются редко и применяются для расширенной работы с веб-сервером.


#### Заголовки

Все заголовки разделяются на четыре основных группы:



* _Основные заголовки_   — могут включаться в любое сообщение;
* _Заголовки запроса_   — используются только в запросах клиента;
* _Заголовки ответа_  — только для ответов от сервера;
* _Заголовки сущности_ — сопровождают каждую сущность сообщения.

**Примеры заголовков:**

`Server: Apache/2.2.11 (Win32) PHP/5.3.0`

`Last-Modified: Sat, 16 Jan 2010 21:16:42 GMT`

`Content-Type: text/plain; charset=windows-1251`

`Content-Language: ru`


#### Тело сообщения

Тело HTTP-сообщения, если оно присутствует, используется для передачи тела объекта, связанного с запросом или ответом. Тело сообщения отличается от тела объекта только в том случае, когда применяется кодирование передачи, что указывается полем заголовка Transfer-Encoding.


## Сервер в HTTP

Сервер ожидает соединения для получения запроса, производит необходимые действия и возвращает клиенту ответ с результатом. Популярные серверы: [Apache](https://ru.wikipedia.org/wiki/Apache_HTTP_Server), [Internet Information Services](https://ru.wikipedia.org/wiki/Internet_Information_Services) (IIS), [nginx](https://ru.wikipedia.org/wiki/Nginx), [ LiteSpeed Web Server](https://ru.wikipedia.org/w/index.php?title=LiteSpeed_Web_Server&action=edit&redlink=1) (LSWS), [Google Web Server](https://ru.wikipedia.org/wiki/Google_Web_Server), [lighttpd](https://ru.wikipedia.org/wiki/Lighttpd). Серверы выступают основными поставщиками услуг хранения и обработки информации (обработка запросов).


### HTTP-ответ

Начинается со стартовой строки ответа сервера, которая состоит из версии HTTP, кода состояния и пояснения. Затем идут заголовки, а после этого — тело запроса.

**Пример стартовой строки**

`HTTP/1.0 200 OK`

#### Код состояния

Состоит из трёх цифр. По [коду состояния](https://ru.wikipedia.org/wiki/%D0%9A%D0%BE%D0%B4_%D0%BE%D1%82%D0%B2%D0%B5%D1%82%D0%B0#%D0%92%D0%B7%D0%B0%D0%B8%D0%BC%D0%BE%D0%B4%D0%B5%D0%B9%D1%81%D1%82%D0%B2%D0%B8%D0%B5_%D1%81_%D0%B2%D0%B5%D0%B1-%D1%81%D0%B5%D1%80%D0%B2%D0%B5%D1%80%D0%BE%D0%BC_(HTTP)) определяется дальнейшее содержимое сообщения и поведение клиента.

В настоящее время выделено пять классов кодов состояния.

* _Информационный (1xx)_ — информирование о процессе передачи.
* _Успех (2xx)_ — успешная обработка запроса клиента.
* _Перенаправление (3xx)_ — необходимо сделать другой запрос.
* _Ошибка клиента (4xx)_ — указание на ошибку со стороны клиента.
* _Ошибка сервера (5xx)_ — неудачное выполнение операции по вине сервера.
